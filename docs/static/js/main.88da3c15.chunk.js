(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{177:function(e,t,n){e.exports=n(357)},271:function(e,t,n){},272:function(e,t,n){},351:function(e,t,n){},352:function(e,t,n){},353:function(e,t,n){},354:function(e,t,n){},355:function(e,t,n){},356:function(e,t,n){},357:function(e,t,n){"use strict";n.r(t);n(178);var r=n(1),a=n.n(r),o=n(12),i=n.n(o),l=(n(271),n(53)),c=n(54),s=n(82),u=n(80),h=n(83),f=(n(272),n(176)),p=n(40),m=n(41),d=(n(351),n(352),function(e){var t=e.className+(e.isActive?" active":"");return a.a.createElement("div",{className:t,onClick:e.onClick})}),v=function(e){var t=function(t,n){n.stopPropagation(),e.onBorderClick(t)};return a.a.createElement("div",{className:function(){var t=e.top,n=e.right,r=e.bottom,a=e.left,o=e.player,i="box";return 2===t&&2===n&&2===r&&2===a&&(i+=0===o?" isFirstPlayer":" isSecondPlayer"),i}(),onClick:function(){return e.onClick()}},["top","right","bottom","left"].map(function(n,r){return e[n]>0&&a.a.createElement(d,{key:n,className:n,onClick:t.bind(null,r),isActive:2===e[n]})}))},y=(n(353),function(e){return a.a.createElement("div",{className:"container"},e.rows.map(function(t,n){return a.a.createElement("div",{className:"row",key:n},t.map(function(t,r){return a.a.createElement(v,Object.assign({key:r,onBorderClick:function(t){return e.onBorderClick(n,r,t)},onClick:function(){return function(t,n){var r=e.rows[t][n].getOpenBorders();1===r.length&&e.onBorderClick(t,n,r[0])}(n,r)}},t))}))}))}),w=(n(354),function(e){return a.a.createElement("div",{className:"Score"},a.a.createElement("span",{className:"Score-firstPlayer"},e.playerOneScore),":",a.a.createElement("span",{className:"Score-secondPlayer"},e.playerTwoScore))}),b=(n(355),function(e){return a.a.createElement("div",{className:"GameResult"},"Game over! ",e.playerOneScore>e.playerTwoScore?"You won :)":"Computer won :(")}),g=function(){function e(t,n,r,a,o){Object(l.a)(this,e),this.top=t,this.right=n,this.bottom=r,this.left=a,this.player=o}return Object(c.a)(e,[{key:"getOpenBorders",value:function(){var e=[];return 1===this.top&&e.push(0),1===this.right&&e.push(1),1===this.bottom&&e.push(2),1===this.left&&e.push(3),e}},{key:"clone",value:function(){return new e(this.top,this.right,this.bottom,this.left,this.player)}},{key:"isActive",get:function(){return 2===this.top&&2===this.right&&2===this.bottom&&2===this.left}},{key:"hasMove",get:function(){return this.getOpenBorders().length>0}}]),e}();function k(e){for(var t=[],n=0;n<2*e;n++){for(var r=[],a=0;a<2*e;a++){if(n<e){if(a<e-n-2||a>=e+n+2){r.push(new g);continue}if(a===e-n-2){r.push(new g(0,2,2,0));continue}if(a===e-n-1){r.push(new g(2,1,1,2));continue}if(a===e+n){r.push(new g(2,2,1,1));continue}if(a===e+n+1){r.push(new g(0,0,2,2));continue}}if(n===e){if(0===a){r.push(new g(1,1,2,2));continue}if(a===2*e-1){r.push(new g(1,2,2,1));continue}}if(n>e){if(a<n-e-1||a>3*e-n){r.push(new g);continue}if(a===n-e-1){r.push(new g(2,2,0,0));continue}if(a===n-e){r.push(new g(1,1,2,2));continue}if(a===3*e-n-1){r.push(new g(1,2,2,1));continue}if(a===3*e-n){r.push(new g(2,0,0,2));continue}}r.push(new g(1,1,1,1))}t.push(r)}return t}var O=function(e){for(var t=[],n=e.length,r=0;r<n;r++)for(var a=0;a<n;a++){var o=e[r][a];if(void 0===o.player){var i=o.getOpenBorders();if(1===i.length)return{row:r,column:a,border:i[0]};if(0!==i.length)for(var l=0;l<i.length;l++){var c=2===i.length||r>0&&0===i[l]&&2===e[r-1][a].getOpenBorders().length||a<n-1&&1===i[l]&&2===e[r][a+1].getOpenBorders().length||r<n-1&&2===i[l]&&2===e[r+1][a].getOpenBorders().length||a>0&&3===i[l]&&2===e[r][a-1].getOpenBorders().length;t.push({row:r,column:a,border:i[l],isLowPriority:c})}}}if(0!==t.length){var s=t[Math.floor(Math.random()*t.length)],u=t.filter(function(e){return!e.isLowPriority});return u.length>0&&(s=u[Math.floor(Math.random()*u.length)]),{row:s.row,column:s.column,border:s.border}}},S=(n(356),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state=n.constructCleanState(3),n.reset=n.reset.bind(Object(p.a)(n)),n.enlargeField=n.enlargeField.bind(Object(p.a)(n)),n.shrinkField=n.shrinkField.bind(Object(p.a)(n)),n.handleBorderClick=n.handleBorderClick.bind(Object(p.a)(n)),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"constructCleanState",value:function(e){return{fieldSize:e,rows:k(e),player:0,playerOneScore:0,playerTwoScore:0,isGameOver:!1}}},{key:"enlargeField",value:function(){this.fieldSizeChange(1)}},{key:"shrinkField",value:function(){this.fieldSizeChange(-1)}},{key:"fieldSizeChange",value:function(e){var t=this,n=this.state.fieldSize+e;n<2||n>10||this.setState(function(n){return t.constructCleanState(n.fieldSize+e)})}},{key:"reset",value:function(){var e=this;this.setState(function(t){return e.constructCleanState(t.fieldSize)})}},{key:"handleBorderClick",value:function(e,t,n){var r=this;this.setState(function(a){var o,i=Object(f.a)(a.rows),l=function(e,t){return[{borderName:"top",nextRow:e-1,nextColumn:t},{borderName:"right",nextRow:e,nextColumn:t+1},{borderName:"bottom",nextRow:e+1,nextColumn:t},{borderName:"left",nextRow:e,nextColumn:t-1}]}(e,t),c=l[n],s=i[e][t],u=!1,h=0;if(2!==s[c.borderName]){o=i[c.nextRow][c.nextColumn],s[c.borderName]=2,o[l[(n+2)%4].borderName]=2,s.isActive&&(s.player=a.player,u=!0,h++),o.isActive&&(o.player=a.player,u=!0,h++);var p=a.playerOneScore,m=a.playerTwoScore;p+=u&&0===a.player?h:0,m+=u&&1===a.player?h:0;var d=u?a.player:0===a.player?1:0,v=i.some(function(e){return e.some(function(e){return e.hasMove})}),y=a.isGameOver;return v?1===d&&r.computerMove():y=!0,{rows:i,player:d,playerOneScore:p,playerTwoScore:m,isGameOver:y}}})}},{key:"computerMove",value:function(){var e=this;setTimeout(function(){var t=O(e.state.rows);t&&e.handleBorderClick(t.row,t.column,t.border)},100)}},{key:"render",value:function(){var e=this.state.playerOneScore,t=this.state.playerTwoScore;return a.a.createElement("div",null,a.a.createElement("div",{className:"FieldSettings"},a.a.createElement("span",{className:"FieldSettings-Size"},"Field size:"),a.a.createElement(m.b,null,a.a.createElement(m.a,{onClick:this.enlargeField},a.a.createElement(m.c,{glyph:"plus"})),a.a.createElement(m.a,{onClick:this.shrinkField},a.a.createElement(m.c,{glyph:"minus"}))),a.a.createElement(m.a,{bsStyle:"primary",className:"ResetButton",onClick:this.reset},"Reset")),a.a.createElement(w,{playerOneScore:e,playerTwoScore:t}),a.a.createElement(y,{rows:this.state.rows,onBorderClick:this.handleBorderClick}),this.state.isGameOver&&a.a.createElement(b,{playerOneScore:e,playerTwoScore:t}))}}]),t}(a.a.PureComponent)),C=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"App"},a.a.createElement("div",{className:"App-header"},a.a.createElement("h2",null,"Cell Domination")),a.a.createElement("div",{className:"App-intro"},a.a.createElement(S,null)))}}]),t}(r.Component);i.a.render(a.a.createElement(C,null),document.getElementById("root"))}},[[177,1,2]]]);
//# sourceMappingURL=main.88da3c15.chunk.js.map